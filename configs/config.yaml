project:
  name: "BTC Trend & Volatility Forecast"
  seed: 42

paths:
  raw_data_dir: "data/raw"
  processed_data_dir: "data/processed"
  models_dir: "data/models"

data:
  source: "binance"  # fallback to synthetic if fetch fails
  symbol: "BTCUSDT"
  binance_endpoints:
    - "https://api.binance.com"
    - "https://api.binance.us"
  branches:
    hourly:
      interval: "1h"
      lookback_days: 420
      market_tz: "Asia/Shanghai"
      horizons: [1, 2, 4]
      lag_returns: [1, 2, 4, 12, 24]
      rolling_mean_return: [24, 72, 168]
      rolling_vol_windows: [24, 72, 168]
      volume_ma_windows: [24, 72]
      time_features: "hourly"
    daily:
      interval: "1d"
      lookback_days: 2200
      market_tz: "Asia/Shanghai"
      horizons: [1, 3, 7]
      lag_returns: [1, 3, 7, 14]
      rolling_mean_return: [7, 30, 90]
      rolling_vol_windows: [7, 30, 90]
      volume_ma_windows: [7, 30]
      time_features: "daily"

features:
  ema_windows: [8, 20, 55, 144, 233]
  macd_windows: [12, 26, 9]
  bollinger_window: 20
  bollinger_std: 2.0
  winsorize:
    enabled: true
    low_q: 0.01
    high_q: 0.99

labels:
  start_threshold_quantile: 0.8
  threshold_recent_bars_hourly: 8760
  threshold_recent_bars_daily: 1825
  start_windows:
    hourly: [1, 2, 4]  # W1/W2/W3 end bars, W0=no_start
    daily: [1, 3, 7]
  include_high_low_targets: false

models:
  mvp_backend: "lightgbm"  # lightgbm / xgboost / sklearn fallback
  train_ratio: 0.8
  quantiles: [0.1, 0.5, 0.9]
  classifier:
    n_estimators: 600
    learning_rate: 0.03
    num_leaves: 63
    max_depth: -1
    subsample: 0.8
    colsample_bytree: 0.8
    reg_alpha: 0.0
    reg_lambda: 0.0
  regressor:
    n_estimators: 600
    learning_rate: 0.03
    num_leaves: 63
    max_depth: -1
    subsample: 0.8
    colsample_bytree: 0.8
    reg_alpha: 0.0
    reg_lambda: 0.0
  calibration:
    enabled: true
    method: "sigmoid"
    cv: 3

validation:
  max_folds: 5
  test_size:
    hourly: 120
    daily: 30
  min_train_size:
    hourly: 1800
    daily: 500

backtest:
  p_up_long: 0.55
  p_up_short: 0.45
  fee_bps: 10
  slippage_bps: 10
